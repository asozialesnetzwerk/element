{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/async-components/views/dialogs/security/ImportE2eKeysDialog.tsx","webpack:///./node_modules/matrix-react-sdk/src/utils/MegolmExportEncryption.ts"],"names":["Phase","ImportE2eKeysDialog","React","Component","constructor","props","super","createRef","files","this","file","current","setState","enableSubmit","state","passphrase","length","ev","target","value","onFormChange","preventDefault","startImport","onFinished","phase","Edit","errStr","componentWillUnmount","unmounted","Importing","Promise","resolve","reject","reader","FileReader","onload","e","result","onerror","readAsArrayBuffer","readFileAsArrayBuffer","then","arrayBuffer","MegolmExportEncryption","keys","matrixClient","importRoomKeys","JSON","parse","catch","logger","error","msg","friendlyText","_t","render","disableForm","className","title","onSubmit","onFormSubmit","htmlFor","ref","id","type","autoFocus","onChange","disabled","label","onPassphraseChange","size","onClick","onCancelClick","subtleCrypto","window","crypto","subtle","webkitSubtle","friendlyError","message","cryptoFailMsg","async","decryptMegolmKeyFile","data","password","body","fileStr","TextDecoder","decode","Uint8Array","lineStart","lineEnd","indexOf","Error","line","slice","trim","HEADER_LINE","dataStart","undefined","dataEnd","base64","latin1String","atob","uint8Array","i","charCodeAt","decodeBase64","unpackMegolmKeyFile","brand","SdkConfig","get","ciphertextLength","salt","subarray","iv","iterations","ciphertext","hmac","aesKey","hmacKey","deriveKeys","toVerify","isValid","plaintext","verify","name","decrypt","counter","encryptMegolmKeyFile","options","kdfRounds","kdf_rounds","getRandomValues","encodedData","TextEncoder","encode","encrypt","cipherArray","bodyLength","resultBuffer","idx","set","toSign","sign","hmacArray","nLines","Math","ceil","lines","Array","o","encodeBase64","join","buffer","packMegolmKeyFile","start","Date","key","keybits","importKey","deriveBits","hash","now","log","getTime","aesProm","hmacProm","all","String","fromCharCode","apply","btoa"],"mappings":"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","file":"bundles/1e9bc1654d423a270d9d/30.js","sourceRoot":""}